<script>
  const urlParams = new URLSearchParams(window.location.search);
  const fileName = urlParams.get('fileName');
  const url = "https://storage.googleapis.com/e-receipt-b118e.appspot.com/";

  // Construct the new URL with the data
  const redirectURL = `intent://com.example.e_receipt_app?fileName=${url}${fileName}#Intent;scheme=https;package=com.example.e_receipt_app;end`;
  
  var platform = document.getElementById('platform');
  platform.textContent = window.navigator.platform;

  if(window.navigator.platform == "Android")
  {
    // Redirect the user to app if on android
    window.location.replace(redirectURL);
  }

  var receipt = document.getElementById('receipt');

  fetch(`${url}${fileName}`)
    .then(response => response.json())
    .then(data => {
      // Display the JSON data in a readable format
      receipt.textcontent = JSON.stringify(data, null, 2);
    })
    .catch(error => console.error('Error loading JSON:', error));
</script>

<body>
  <label for="receipt">Your receipt: </label>
  <input type="text" id="receipt" name="receipt"><br /><br />
  <input type="text" id="platform" name="platform"><br /><br />
</body>