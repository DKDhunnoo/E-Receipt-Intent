<script>
  const urlParams = new URLSearchParams(window.location.search);
  const fileName = urlParams.get('fileName');
  const url = "https://storage.googleapis.com/e-receipt-b118e.appspot.com/";

  // Construct the new URL with the data
  const redirectURL = `intent://com.example.e_receipt_app?fileName=${url}${fileName}#Intent;scheme=https;package=com.example.e_receipt_app;S.browser_fallback_url=https://google.com;end`;
  
  console.log(window.navigator.platform);

  // Redirect the user
  window.location.replace(redirectURL);

  var receipt = document.getElementById('receipt').value;

  fetch(`${url}${fileName}`)
    .then(response => response.json())
    .then(data => {
      // Display the JSON data in a readable format
      receipt.textcontent = JSON.stringify(data, null, 2);
    })
    .catch(error => console.error('Error loading JSON:', error));
</script>

<body>
  <label for="receipt">Your receipt: </label>
  <input type="text" id="receipt" name="receipt"><br /><br />
</body>