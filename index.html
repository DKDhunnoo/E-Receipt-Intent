<!DOCTYPE html>
<html>

<head>
  <title>Display Platform Name</title>
</head>

<body>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const fileName = urlParams.get('fileName');
    const url = "https://storage.googleapis.com/e-receipt-b118e.appspot.com/";

    // Construct the new URL with the data
    const redirectURL = `intent://com.example.e_receipt_app?fileName=${url}${fileName}#Intent;scheme=https;package=com.example.e_receipt_app;end`;

    const platformName = navigator.platform;

    // Display the platform name
    const displayElement = document.createElement('div');
    displayElement.textContent = 'Platform: ' + platformName;
    document.body.appendChild(displayElement);

    const isAndroid = /Android/.test(navigator.userAgent);

    if (isAndroid)
    {
      // Redirect the user to app if on android
      window.location.replace(redirectURL);
    }
    else
    {
      const displayElement = document.createElement('div1');
      displayElement.textContent = 'IsAndroid: ' + isAndroid;
      document.body.appendChild(displayElement);
    }

    var receipt = document.getElementById('receipt');

    fetch(`${url}${fileName}`)
      .then(response => response.json())
      .then(data =>
      {
        // Display the JSON data in a readable format
        receipt.textcontent = JSON.stringify(data, null, 2);
      })
      .catch(error => console.error('Error loading JSON:', error));
  </script>

  <label for="receipt">Your receipt: </label>
  <input type="text" id="receipt" name="receipt"><br /><br />
</body>

</html>